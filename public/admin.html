<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®¡ç†å‘˜ä¸»é¡µ - å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Microsoft YaHei', 'Segoe UI', sans-serif; background: #f5f7fa; min-height: 100vh; }
        .navbar { background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); color: white; padding: 15px 30px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .navbar-brand { font-size: 24px; font-weight: bold; }
        .navbar-user { display: flex; align-items: center; gap: 20px; }
        .user-info { display: flex; align-items: center; gap: 10px; }
        .btn-logout { background: rgba(255,255,255,0.2); border: 1px solid white; color: white; padding: 8px 20px; border-radius: 5px; cursor: pointer; transition: all 0.3s; }
        .btn-logout:hover { background: rgba(255,255,255,0.3); }
        .container { max-width: 1200px; margin: 30px auto; padding: 0 20px; }
        .welcome-card { background: white; border-radius: 10px; padding: 30px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .welcome-card h2 { color: #333; margin-bottom: 10px; }
        .welcome-card p { color: #666; }
        .quick-actions { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .action-card { background: white; border-radius: 10px; padding: 30px; text-align: center; cursor: pointer; transition: all 0.3s; box-shadow: 0 2px 10px rgba(0,0,0,0.05); text-decoration: none; color: inherit; }
        .action-card:hover { transform: translateY(-5px); box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
        .action-icon { font-size: 56px; margin-bottom: 15px; }
        .action-card h3 { color: #333; margin-bottom: 10px; font-size: 20px; }
        .action-card p { color: #666; font-size: 14px; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; }
        .stat-card { background: white; border-radius: 10px; padding: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .stat-label { color: #666; font-size: 14px; margin-bottom: 10px; }
        .stat-value { color: #333; font-size: 36px; font-weight: bold; }
        .stat-unit { color: #999; font-size: 18px; margin-left: 5px; }
        .stat-card.books { border-left: 4px solid #3498db; }
        .stat-card.readers { border-left: 4px solid #2ecc71; }
        .stat-card.borrows { border-left: 4px solid #f39c12; }
        .stat-card.overdue { border-left: 4px solid #e74c3c; }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="navbar-brand">ğŸ›¡ï¸ å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ - ç®¡ç†å‘˜</div>
        <div class="navbar-user">
            <div class="user-info">
                <span>ğŸ‘¨â€ğŸ’¼</span>
                <span id="userName">ç®¡ç†å‘˜</span>
                <span>|</span>
                <span id="userId"></span>
            </div>
            <button class="btn-logout" onclick="logout()">é€€å‡ºç™»å½•</button>
        </div>
    </nav>
    <div class="container">
        <div class="welcome-card">
            <h2>æ¬¢è¿ï¼Œ<span id="welcomeName"></span>ï¼</h2>
            <p>ç®¡ç†å‘˜æ§åˆ¶é¢æ¿ - ç®¡ç†å›¾ä¹¦ã€è¯»è€…å’Œå€Ÿé˜…è®°å½•</p>
        </div>
        <div class="quick-actions">
            <a href="admin-books.html" class="action-card">
                <div class="action-icon">ğŸ“š</div>
                <h3>å›¾ä¹¦ç®¡ç†</h3>
                <p>æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤å›¾ä¹¦åŠå‰¯æœ¬</p>
            </a>
            <a href="admin-readers.html" class="action-card">
                <div class="action-icon">ğŸ‘¥</div>
                <h3>è¯»è€…ç®¡ç†</h3>
                <p>æŸ¥çœ‹è¯»è€…ä¿¡æ¯ï¼Œå†»ç»“/è§£å†»è´¦æˆ·</p>
            </a>
            <a href="admin-book-borrow.html" class="action-card">
                <div class="action-icon">ğŸ“–</div>
                <h3>äººå·¥å€Ÿä¹¦</h3>
                <p>æ‰‹åŠ¨å€Ÿé˜…ä¹¦ç±</p>
            </a>
            <a href="admin-book-return.html" class="action-card">
                <div class="action-icon">ğŸ“•</div>
                <h3>äººå·¥è¿˜ä¹¦</h3>
                <p>æ‰‹åŠ¨å½’è¿˜ä¹¦ç±</p>
            </a>
            <a href="admin-exception-feedback.html" class="action-card">
                <div class="action-icon">âš ï¸ï¸</div>
                <h3>å¼‚å¸¸å¤„ç†</h3>
                <p>æäº¤å¼‚å¸¸æŠ¥å‘Š</p>
            </a>
        </div>
        <h3 style="margin: 30px 0 20px 0; color: #333;">ğŸ“Š ç³»ç»Ÿç»Ÿè®¡</h3>
        <div class="stats-grid">
            <div class="stat-card books">
                <div class="stat-label">å›¾ä¹¦æ€»æ•°</div>
                <div class="stat-value" id="totalBooks">0<span class="stat-unit">æœ¬</span></div>
            </div>
            <div class="stat-card readers">
                <div class="stat-label">è¯»è€…æ€»æ•°</div>
                <div class="stat-value" id="totalReaders">0<span class="stat-unit">äºº</span></div>
            </div>
            <div class="stat-card borrows">
                <div class="stat-label">å½“å‰å€Ÿé˜…</div>
                <div class="stat-value" id="currentBorrows">0<span class="stat-unit">ç¬”</span></div>
            </div>
            <div class="stat-card overdue">
                <div class="stat-label">è¶…æœŸå›¾ä¹¦</div>
                <div class="stat-value" id="overdueBooks">0<span class="stat-unit">æœ¬</span></div>
            </div>
        </div>
    </div>
    <script>
        const API_BASE_URL = 'http://localhost:8080';
        window.onload = function() {
            const user = JSON.parse(localStorage.getItem('user') || '{}');
            if (!user.userId || user.role !== 'admin') {
                alert('éœ€è¦ç®¡ç†å‘˜æƒé™');
                window.location.href = 'login.html';
                return;
            }
            document.getElementById('userName').textContent = user.name || 'ç®¡ç†å‘˜';
            document.getElementById('userId').textContent = user.userId || '';
            document.getElementById('welcomeName').textContent = user.name || 'ç®¡ç†å‘˜';
            loadStats();
        };
        async function loadStats() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/admin/stats`);
                const data = await response.json();
                if (data.success) {
                    document.getElementById('totalBooks').innerHTML = `${data.data.totalBooks}<span class="stat-unit">æœ¬</span>`;
                    document.getElementById('totalReaders').innerHTML = `${data.data.totalReaders}<span class="stat-unit">äºº</span>`;
                    document.getElementById('currentBorrows').innerHTML = `${data.data.currentBorrows}<span class="stat-unit">ç¬”</span>`;
                    document.getElementById('overdueBooks').innerHTML = `${data.data.overdueBooks}<span class="stat-unit">æœ¬</span>`;
                }
            } catch (error) {
                console.error('åŠ è½½ç»Ÿè®¡ä¿¡æ¯å¤±è´¥:', error);
            }
        }
        function logout() {
            localStorage.removeItem('user');
            window.location.href = 'login.html';
        }
    </script>
</body>
</html>

